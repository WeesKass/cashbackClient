<!doctype html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{layout}"
      xmlns:layout="http://www.w3.org/1999/xhtml">
<head>
    <title data-th-text="#{label.home.title}"></title>
</head>

<body>

<div layout:fragment="content">
    <div class="row">
        <div class="col-lg-9">
            <div class="card bg-light mb-3">
                <div class="card-header">
                    <h3>
                        Organization
                    </h3>
                </div>
                <div class="card-body">
                    <div class="card">
                        <div class="card-body">
                            <div>
                                <div class="row">
                                    <div class="col-lg-3" style="margin: 2%">
                                        <img th:src="${org.getImage()}"
                                             style="max-width: 200px;"
                                             alt="profile">
                                    </div>
                                    <div class="col-lg-3" style="margin: 2%">
                                        <h5 class="display-8" th:text="${org.getName()}">Organization name</h5>
                                        <p class="card-text" th:text="${org.getCategoryName()}">Category name</p>
                                        <!--                                        <p class="card-text">-->
                                        <!--                                            <small th:text="#{label.registration_date} + ' ' +  ${#dates.format(org.ge,'dd MMMMMMMM yyyy')}">created date</small>-->
                                        <!--                                        </p>-->
                                        <a href="#" class="btn btn-secondary">SUBSCRIBE</a>
                                    </div>
                                    <div class="col-lg-4 ml-auto">
                                        <div class="card bg-light mb-3">
                                                <div id="carouselFilials" style="background-color: #fff" class="carousel slide container">
                                                    <div>
                                                        <h3>Filials</h3>
                                                    <div class="d-flex flex-row-reverse justify-content-between" style="position: absolute; top:10px;right: 5px;">
                                                        <a style="background-color: #ff407b; border-color: #ff407b;"  href="#carouselFilials"
                                                           role="button" data-slide="next">
                                                        <span class="carousel-control-next-icon"
                                                              aria-hidden="true"></span>
                                                            <span class="sr-only">Next</span>
                                                        </a>
                                                        <a style="background-color: #ff407b; border-color: #ff407b;" href="#carouselFilials"
                                                           role="button" data-slide="prev">
                                                        <span class="carousel-control-prev-icon"
                                                              aria-hidden="true"></span>
                                                            <span class="sr-only">Previous</span>
                                                        </a>
                                                    </div>
                                                    </div>
                                                    <div class="carousel-inner" style="margin-bottom: 0">
                                                        <div class="carousel-item active">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <h5 th:text="${filials[0].name}"
                                                                            class="card-header-title" >Filial
                                                                            Name</h5>
                                                                        <p class="card-text"
                                                                           th:text="${filials[0].address}">
                                                                            Welcome</p>
                                                                        <img th:src="${filials[0].image}"
                                                                             width="128"
                                                                             height="64" alt="default">
                                                                        <span th:text="${filials[0].averageRate}"
                                                                              class="badge badge-pill badge-secondary"
                                                                              style="position: absolute;top:25px;right: 10px;">Average Rate</span>
                                                                    </div>
                                                                </div>
                                                        </div>
                                                        <div class="carousel-item"
                                                             th:each="filial,iterStat : ${filials}"
                                                             th:if="${iterStat.index} != 0">
                                                            <div class="card">
                                                            <div class="card-body">
                                                                <h5 th:text="${filial.name}"
                                                                    class="card-header-title" >Filial
                                                                    Name</h5>
                                                                <p class="card-text"
                                                                   th:text="${filial.address}">
                                                                    Welcome</p>
                                                                <img th:src="${filial.image}"
                                                                     width="128"
                                                                     height="64" alt="default">
                                                                <span th:text="${filial.averageRate}"
                                                                      class="badge badge-pill badge-secondary"
                                                                      style="position: absolute;top:25px;right: 10px;">Average Rate</span>
                                                            </div>
                                                        </div>
                                                        </div>
                                                    </div>
                                                </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="jumbotron jumbotron-fluid"
                                     style="padding: 2rem 1rem;margin-bottom: 2rem;background-color: #e9ecef;border-radius: .3rem;">
                                    <h5 class="display-12">Description</h5>
                                    <p th:text="${org.getDescription()}"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div th:fragment="events">
                <div class="card bg-light mb-3">
                    <div class="card-header">
                        <div class="row">
                            <div class="col-lg-3">
                                <h3 th:text="#{label.Events}" class="card-title">Events</h3>
                            </div>
                            <div class="col-lg-2 ml-auto">
                                <ul class="pagination">
                                    <li th:if="not${events.getFirst()}" class="page-item">
                                        <a class="page-link"
                                           th:href="@{/info/{id}/event/list/(id=${org.getId()},page=${events.getNumber()-1})}"
                                           tabindex="-1"><</a>
                                    </li>
                                    <th:block
                                            th:each="i: ${#numbers.sequence(0, events.getTotalPages() - 1)}">
                                        <li class="page-item active" th:if="${events.getNumber() == i}">
                                            <span class="page-link">[[${i}+1]]</span>
                                        </li>
                                        <li th:unless="${events.getNumber() == i}">
                                            <a class="page-link"
                                               th:href="@{/info/{id}/event/list/(id=${org.getId()},page=${i})}">[[${i}+1]]</a>
                                        </li>
                                    </th:block>
                                    <li class="page-item" th:if="not${events.getLast()}">
                                        <a class="page-link"
                                           th:href="@{/info/{id}/event/list/(id=${org.getId()},page=${events.getNumber()+1})}">></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="card-body" style="position: relative">
                        <div class="row d-flex justify-content-center">
                            <div th:each="event : ${events.getContent()}"
                                 class="col-lg-6 d-flex justify-content-center">
                                <div class="card bg-light"
                                     style="max-width: 500px; max-height: 300px;border-radius: 10px;">
                                    <div class="img-container">
                                        <img th:src="${event.getImage()}" class="card-img-top" width="500px"
                                             height="300px"
                                             style="border-radius: 10px;" alt="events">
                                        <div class="img-overlay" style="border-radius: 10px;">
                                            <div class="info-fluid">
                                                <div class="jumbotron-spec jumbotron-spec-fluid">
                                                    <div class="container">
                                                        <h5 th:text="${event.getName()}" class="display-10">Events
                                                            Name</h5>
                                                        <p th:text="${event.getDescription()}">Events DESCRIPTION</p>
                                                        <hr class="my-4">
                                                        <a href="#" th:text="#{label.more}"
                                                           class="btn btn-outline-secondary"
                                                           style="position: absolute;top:10px;right: 10px;">info</a>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <section id="search-section">
                <div th:fragment="bonuses" class="card">
                    <div class="card bg-light mb-3">
                        <div class="card-header">
                            <h3 th:text="#{label.Bonuses}">
                                Bonuses
                            </h3>
                        </div>
                        <div class="card-body">
                            <div th:each="bonus : ${bonuses.getContent()}" class="card">
                                <div class="card-body">
                                    <h5 th:text="${bonus.getOrgName()}" class="card-title">Organization 4</h5>
                                    <p class="card-text" th:text="${bonus.getOrgBonusType()}">Welcome</p>
                                    <p class="card-text" th:text="#{label.days} +' '+ ${bonus.getValidity()}"></p>
                                    <button th:text="#{label.more}" th:id="${bonus.id}"
                                            class="btn btn-outline-secondary"
                                            style="position: absolute;bottom:10px;right: 10px    ;">info
                                    </button>
                                    <img style="position: absolute;top:30px;right: 20px;" th:src="${bonus.getImage()}"
                                         width="64"
                                         height="64" alt="default">
                                </div>
                            </div>
                            <nav>
                                <ul class="pagination">
                                    <li th:if="not${bonuses.getFirst()}" class="page-item">
                                        <a class="page-link"
                                           th:href="@{/info/{id}/bonus/list/(id=${org.getId()},page=${bonuses.getNumber()-1})}"
                                           tabindex="-1"><</a>
                                    </li>
                                    <th:block
                                            th:each="i: ${#numbers.sequence(0, bonuses.getTotalPages() - 1)}">
                                        <li class="page-item active" th:if="${bonuses.getNumber() == i}">
                                            <span class="page-link">[[${i}+1]]</span>
                                        </li>
                                        <li th:unless="${bonuses.getNumber() == i}">
                                            <a class="page-link"
                                               th:href="@{/info/{id}/bonus/list/(id=${org.getId()},page=${i})}">[[${i}+1]]</a>
                                        </li>
                                    </th:block>
                                    <li class="page-item" th:if="not${bonuses.getLast()}">
                                        <a class="page-link"
                                           th:href="@{/info/{id}/bonus/list/(id=${org.getId()},page=${bonuses.getNumber()+1})}">></a>
                                    </li>
                                </ul>
                            </nav>
                            <div th:id="${bonus.id}+'modal'" th:each="bonus : ${bonuses.getContent()}"
                                 class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                                 aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <img th:src="${bonus.getImage()}" width="64"
                                                 height="64" alt="default">
                                            <h5 style="position: absolute;left: 100px;top:0;font-size: 2em"
                                                class="modal-title" th:text="${bonus.getOrgName()}">Modal title</h5>
                                            <h5 style="position: absolute;left: 101px;top:40px;font-family: 'Fira Sans', sans-serif"
                                                th:text="${bonus.getOrgDesc()}">Modal title</h5>
                                        </div>
                                        <div class="modal-body">
                                            <h5 style="font-family: 'Fira Sans', sans-serif;font-size: 1.3em;"
                                                th:text="${bonus.getDesc()}">Modal title</h5>
                                            <h5 style="font-family: 'Fira Sans', sans-serif;font-size: 1em;"
                                                th:text="#{label.modal.from} + ' ' +  ${#dates.format(bonus.validFrom,'dd-MMM-yyyy')}">
                                                Modal title</h5>
                                            <h5 style="font-family: 'Fira Sans', sans-serif;font-size: 1em;"
                                                th:text="#{label.modal.to} + ' ' +  ${#dates.format(bonus.validTo,'dd-MMM-yyyy')}">
                                                Modal title</h5>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" th:text="#{label.modal.close}" class="btn btn-primary"
                                                    data-dismiss="modal">Close
                                            </button>
                                            <button type="button" th:text="#{label.modal.toOrg}"
                                                    class="btn btn-secondary">Save changes
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <script>
            $(".btn").click(function () {
                var idcheck = $(this).attr('id');
                var window = '#' + idcheck + 'modal';
                $(window).modal('show');
            });
        </script>
    </div>
</div>
</body>
</html>